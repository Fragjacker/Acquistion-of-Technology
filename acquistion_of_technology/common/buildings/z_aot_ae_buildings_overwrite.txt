#####################
# Government Building
#####################
building_acot_ae_ancient_palace = {
	inline_script = {
		script = buildings/capital_buildings_boilerplate
		BUILD_TIME = 900
		TIER = 2
		OVERLORD_JOB = acot_overlord
		OVERSEER_JOB = acot_overseer
		ENFORCER_JOB = acot_enforcer
		PRODUCES = "
			energy = 40
			sr_dark_matter = 20
			acot_sr_dark_energy = 20
			"
		COST = "
			alloys = 1500
			unity = 30000
			sr_dark_matter = 5000
			acot_sr_dark_energy = 5000
			"
	}
	country_modifier = {
		country_resource_max_add = 20000
		country_resource_max_acot_sr_dark_energy_add = 5000
		country_resource_max_sr_dark_matter_add = 5000
	}
	potential = {
		exists = planet_owner
		planet_owner = {
			is_individualistic_empire = yes
			is_fallen_empire = no
			has_technology = tech_acot_ae_ancient_palace
		}
	}
	convert_to = {
		building_ancient_control_center
		building_ancient_palace
		building_ancient_hive_capital
		building_acot_ae_ancient_control_center
		building_acot_ae_ancient_hive_cluster
	}
	allow = {
	}
	upgrades = {
		building_phanon_palace
	}
	prerequisites = {
		tech_acot_ae_ancient_palace
	}
	show_tech_unlock_if = {
		is_regular_empire = yes
	}
}

# Supra Nexus
building_acot_ae_ancient_control_center = {
	inline_script = {
		script = buildings/capital_buildings_boilerplate
		BUILD_TIME = 900
		TIER = 2
		OVERLORD_JOB = acot_overlord_droid
		OVERSEER_JOB = acot_overseer_droid
		ENFORCER_JOB = acot_enforcer_drone
		PRODUCES = "
			energy = 40
			sr_dark_matter = 20
			acot_sr_dark_energy = 20
			"
		COST = "
			alloys = 1500
			unity = 30000
			sr_dark_matter = 5000
			acot_sr_dark_energy = 5000
			"
	}
	country_modifier = {
		country_resource_max_add = 20000
		country_resource_max_acot_sr_dark_energy_add = 5000
		country_resource_max_sr_dark_matter_add = 5000
	}
	potential = {
		exists = planet_owner
		planet_owner = {
			OR = {
				is_machine_empire = yes
				is_country_type = ai_empire
			}
			has_technology = tech_acot_ae_ancient_control_center
			is_fallen_empire = no
		}
	}
	convert_to = {
		building_ancient_control_center
		building_ancient_palace
		building_acot_ae_ancient_palace
		building_acot_ae_ancient_hive_cluster
	}
	upgrades = {
		building_phanon_control_center
	}
	allow = {
	}
	prerequisites = {
		tech_acot_ae_ancient_control_center
	}
	show_tech_unlock_if = {
		is_machine_empire = yes
	}
	planet_modifier = {
		planet_housing_add = 12000
		planet_amenities_add = 24000
		planet_max_districts_add = 6
		job_acot_overlord_droid_add = 100
		job_acot_overseer_droid_add = 800
		job_acot_enforcer_drone_add = 400
		planet_orbital_bombardment_damage = -0.20
		pop_environment_tolerance = 0.30
		planet_defense_armies_add = 20
		planet_traders_trade_produces_add = 0.5
	}
}

# Hive Nexus
building_acot_ae_ancient_hive_cluster = {
	inline_script = {
		script = buildings/capital_buildings_boilerplate
		BUILD_TIME = 900
		TIER = 2
		OVERLORD_JOB = acot_overlord_drone
		OVERSEER_JOB = acot_overseer_drone
		ENFORCER_JOB = acot_enforcer_drone
		PRODUCES = "
			energy = 40
			sr_dark_matter = 20
			acot_sr_dark_energy = 20
			"
		COST = "
			alloys = 1500
			unity = 30000
			sr_dark_matter = 5000
			acot_sr_dark_energy = 5000
			"
	}
	country_modifier = {
		country_resource_max_add = 20000
		country_resource_max_acot_sr_dark_energy_add = 5000
		country_resource_max_sr_dark_matter_add = 5000
	}
	upgrades = {
		building_phanon_hive_cluster
	}
	potential = {
		exists = planet_owner
		planet_owner = {
			OR = {
				is_hive_empire = yes
				is_country_type = swarm
			}
			is_fallen_empire = no
			has_technology = tech_acot_ae_ancient_hive_cluster
		}
	}
	convert_to = {
		building_ancient_control_center
		building_ancient_palace
		building_ancient_hive_capital
		building_acot_ae_ancient_control_center
		building_acot_ae_ancient_palace
	}
	prerequisites = {
		tech_acot_ae_ancient_hive_cluster
	}
	show_tech_unlock_if = {
		is_hive_empire = yes
	}
}

#####################
# Enigmatic Building
#####################
building_ae_affluence_center = {
	inline_script = {
		script = buildings/production/affluence_center
		TIER = 2
		PREREQUISITE = tech_aot_ae_affluence_center
		JOB = artisan
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_affluence_center
		COST = "
			minerals = 250
			sr_dark_matter = 750
			acot_sr_dark_energy = 750
			"
		PRODUCES = "
			consumer_goods = @auto_cg_ae
			unity = @auto_unity_ae
			society_research = 200
			"
		UPKEEP = "
			acot_sr_dark_energy = 20
			sr_dark_matter = 20
			"
	}
}
building_ae_nourishment_center = {
	inline_script = {
		script = buildings/production/nourishment_center
		TIER = 2
		PREREQUISITE = tech_aot_ae_nourishment_center
		JOB = farmer
		JOB_DRONE = agri
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_nourishment_center
		COST = "
			minerals = 250
			sr_dark_matter = 750
			acot_sr_dark_energy = 750
			"
		PRODUCES = "
			food = @auto_food_ae
			"
		UPKEEP = "
			sr_dark_matter = 20
			acot_sr_dark_energy = 20
			"
	}
}
building_ae_dimensional_fabricator = {
	inline_script = {
		script = buildings/production/dimensional_fabricator
		TIER = 2
		PREREQUISITE = tech_aot_ae_dimensional_fabricator
		UPGRADES_INTO = building_phanon_dimensional_fabricator
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		COST = "
			minerals = 250
			acot_sr_dark_energy = 750
			sr_dark_matter = 750
			"
		PRODUCES = "
			minerals = @auto_minerals_ae
			rare_crystals = @auto_sr_ae
			exotic_gases = @auto_sr_ae
			volatile_motes = @auto_sr_ae
			sr_zro = @auto_sr_ae
			nanites = @auto_sr_ae
			sr_dark_matter = @auto_sr_ae
			acot_sr_dark_energy = @auto_sr_ae
			sr_living_metal = @auto_sr_ae
			"
		UPKEEP = "
			energy = 30
			acot_sr_dark_energy = 30
			"
	}
}
building_ae_class_4_singularity = {
	inline_script = {
		script = buildings/production/class_x_singularity
		TIER = 2
		CAN_BUILD = no
		PREREQUISITE = tech_aot_ae_class_4_singularity
		ALLOW = "has_ascended_capital = yes"
		UPGRADES_INTO = building_phanon_class_7_singularity
		JOB = technician
		COST = "
			minerals = 250
			acot_sr_dark_energy = 750
			sr_dark_matter = 750
			"
		PRODUCES = "
			energy = @auto_energy_ae
			acot_sr_dark_energy = 60
			sr_dark_matter = 60
			physics_research = 60
			"
		UPKEEP = "
			sr_dark_matter = 30
			acot_sr_dark_energy = 30
			"
	}
}
building_ae_nano_forge = {
	inline_script = {
		script = buildings/production/nano_forge
		TIER = 2
		PREREQUISITE = tech_aot_ae_nano_forge
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_nano_forge
		JOB = foundry
		JOB_DRONE = alloy
		JOB_MACHINE = fabricator
		COST = "
			minerals = 100
			sr_dark_matter = 1000
			acot_sr_dark_energy = 1000
			"
		PRODUCES = "
			alloys = @auto_alloy_ae
			engineering_research = 40
			"
		UPKEEP = "
			acot_sr_dark_energy = 30
			sr_dark_matter = 30
			"
	}
}
building_ae_master_archive = {
	inline_script = {
		script = buildings/production/master_archive
		TIER = 2
		PREREQUISITE = tech_aot_ae_master_archive
		ALLOW = "
			has_ascended_capital = yes
			NOR = {
				has_building = building_stellarite_master_archive
				has_building = building_phanon_master_archive
			}
			"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_master_archive
		JOB = head_researcher
		JOB_DRONE = brain_drone
		JOB_MACHINE = calculator
		COST = "
			minerals = 150
			acot_sr_dark_energy = 1500
			sr_dark_matter = 1500
			"
		PRODUCES = "
			physics_research = @auto_research_ae
			society_research = @auto_research_ae
			engineering_research = @auto_research_ae
			minor_artifacts = 10
			"
		UPKEEP = "
			acot_sr_dark_energy = 15
			sr_dark_matter = 15
			energy = 20
			"
	}
}
building_ae_empyrean_shrine = {
	inline_script = {
		script = buildings/production/empyrean_shrine
		TIER = 2
		CAN_BUILD = no
		PREREQUISITE = tech_aot_ae_empyrean_shrine
		UPGRADES_INTO = building_phanon_empyrean_shrine
		ALLOW = "
			has_ascended_capital = yes
			planet_owner = {
				is_machine_empire = no
			}
			NOT = {
				has_modifier = slave_colony
			}
			"
		JOB = high_priest
		COST = "
			minerals = 150
			sr_dark_matter = 1000
			acot_sr_dark_energy = 1000
			"
		PRODUCES = "
			society_research = 200
			sr_zro = 100
			unity = @auto_unity_ae
			influence = 1
			"
		UPKEEP = "
			sr_dark_matter = 15
			acot_sr_dark_energy = 15
			"
	}
}
building_ae_sky_dome = {
	inline_script = {
		script = buildings/production/sky_dome
		TIER = 2
		PREREQUISITE = tech_aot_ae_sky_dome
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_sky_dome
		ALLOW = "
			has_ascended_capital = yes
			"
		COST = "
			minerals = 150
			sr_dark_matter = 750
			acot_sr_dark_energy = 750
			"
		UPKEEP = "
			sr_dark_matter = 20
			acot_sr_dark_energy = 20
			"
		AI_FACTORS = "
			# ---------------------------- Build only if we have no districts left --------------------------- #
			modifier = {
				factor = 0
				free_district_slots > 0
			}
			modifier = {
				factor = 2
				free_district_slots = 0
			}
			modifier = {
				factor = 10
				free_housing <= 0
			}
			"
	}
}
building_acot_ae_ancient_cryo_chamber = {
	inline_script = {
		script = buildings/civilian/cryo_chamber
		TIER = 2
		PREREQUISITE = tech_acot_ae_ancient_cryo_chamber
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_ancient_cryo_chamber
		JOB_MACHINE = acot_entertainer
		AI_FACTORS = "
			modifier = {
				factor = 200
				free_housing < 0
			}
			modifier = {
				factor = 300
				free_amenities < 2
			}
			modifier = {
				factor = 0
				free_housing > 1
			}
			"
	}
	convert_to = {
		building_acot_ae_mansion
		building_acot_ae_temple
		building_acot_ae_hive_depot
	}
	resources = {
		category = planet_buildings
		produces = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			unity = 30
		}
		cost = {
			minerals = 400
			sr_dark_matter = 300
			acot_sr_dark_energy = 300
		}
		upkeep = {
			energy = 10
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
	}
}
building_acot_ae_mansion = {
	inline_script = {
		script = buildings/civilian/mansion
		TIER = 2
		PREREQUISITE = tech_acot_ae_mansion
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_mansion
		AI_FACTORS = "
			modifier = {
				factor = 3000
				free_amenities < 0
			}
			modifier = {
				factor = 5000
				free_housing < 1
			}
			"
	}
	convert_to = {
		building_acot_ae_temple
		building_acot_ae_hive_depot
		building_acot_ae_ancient_cryo_chamber
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = 400
			sr_dark_matter = 300
			acot_sr_dark_energy = 300
		}
		produces = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			unity = 24
			trade = 48
		}
		upkeep = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			energy = 10            # Mod Pack: added upkeep
			acot_sr_dark_energy = 4
			sr_dark_matter = 4
		}
	}
}
building_acot_ae_hive_depot = {
	inline_script = {
		script = buildings/civilian/hive_depot
		TIER = 2
		PREREQUISITE = tech_acot_ae_hive_depot
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_hive_depot
		AI_FACTORS = "
			modifier = {
				factor = 3000
				free_amenities < 0
			}
			modifier = {
				factor = 5000
				free_housing < 1
			}
			"
	}
	convert_to = {
		building_acot_ae_mansion
		building_acot_ae_temple
		building_acot_ae_ancient_cryo_chamber
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = 400
			sr_dark_matter = 300
			acot_sr_dark_energy = 300
		}
		produces = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			unity = 24
		}
		upkeep = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			acot_sr_dark_energy = 4
			sr_dark_matter = 4
		}
	}
}

#####################
# Military
#####################
building_acot_ae_psg = {
	inline_script = {
		script = buildings/military/planetary_shield_generator
		TIER = 2
		PREREQUISITE = tech_acot_ae_psg
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_psg
		REDUCTION_FACTOR = -0.95
		AI_FACTORS = "
			modifier = {
				factor = 3000
				free_amenities < 0
			}
			modifier = {
				factor = 5000
				free_housing < 1
			}
			"
	}
	custom_tooltip = building_acot_ae_psg_tooltip
	resources = {
		category = planet_buildings
		cost = {
			alloys = 5000
			sr_dark_matter = 400
			acot_sr_dark_energy = 600
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 10
			acot_sr_dark_energy = 10
		}
	}
}
building_acot_ae_stronghold = {
	inline_script = {
		script = buildings/military/stronghold
		TIER = 2
		PREREQUISITE = tech_acot_ae_stronghold
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_stronghold
		JOB = acot_soldier
		AI_FACTORS = "
			modifier = {
				weight = 10000
				num_pops >= 4000
				NOR = {
					num_buildings = {
						type = building_acot_ae_stronghold
						value <= 2
					}
				}
				planet_owner = {
					has_monthly_income = {
						resource = sr_dark_matter
						value <= 3
					}
				}
			}
			"
	}
	custom_tooltip = building_acot_ae_stronghold_tooltip
	resources = {
		category = planet_buildings
		cost = {
			alloys = 400
			sr_dark_matter = 250
			acot_sr_dark_energy = 375
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
	}
}
building_acot_giga_fortress = {
	inline_script = {
		script = buildings/military/giga_fortress
		TIER = 2
		PREREQUISITE = tech_acot_giga_fortress
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = "
			building_acot_giga_fortress_array
			building_acot_giga_fortress_lab
			building_acot_giga_fortress_obelisk
			"
		JOBS_REGULAR = "
			job_acot_giga_fortress_operator_add = 100
			"
		JOBS_HIVE = "
			job_acot_giga_fortress_operator_drone_add = 100
			"
		JOBS_MACHINE = "
			job_acot_giga_fortress_operator_drone_add = 100
			"
		JOBS_FE = "
			job_acot_giga_fortress_operator_ancient_add = 300
			"
		COST = "
			minerals = 35000
			influence = 150
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
			"
		UPKEEP = "
			energy = 10
			volatile_motes = 1
			exotic_gases = 1
			rare_crystals = 1
			sr_dark_matter = 2
			acot_sr_dark_energy = 2
			"
		PRODUCES = "
			unity = 50
			energy = 50
			"
		AI_FACTORS = "
			modifier = {
				factor = 0
				planet_owner = {
					has_monthly_income = {
						resource = sr_dark_matter
						value <= 3
					}
				}
			}
			"
	}
	custom_tooltip = building_acot_giga_fortress_tooltip
	planet_modifier = {
		planet_amenities_add = 2000
		planet_housing_add = 2000
		planet_stability_add = 5
	}
	army_modifier = {
		army_defense_morale_mult = 5
		army_defense_health_mult = 2
		army_defense_damage_mult = 2
	}
}
building_acot_giga_fortress_array = {
	inline_script = {
		script = buildings/military/giga_fortress
		TIER = 2
		PREREQUISITE = tech_acot_giga_fortress
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_giga_fortress_array
		JOBS_REGULAR = "
			job_acot_giga_fortress_operator_add = 100
			job_acot_giga_fortress_operator_mentat_add = 100
			"
		JOBS_HIVE = "
			job_acot_giga_fortress_operator_drone_add = 100
			job_acot_giga_fortress_operator_mentat_drone_add = 100
			"
		JOBS_MACHINE = "
			job_acot_giga_fortress_operator_drone_add = 100
			job_acot_giga_fortress_operator_mentat_drone_add = 100
			"
		JOBS_FE = "
			job_acot_giga_fortress_operator_ancient_add = 100
			"
		COST = "
			minerals = 15000
			sr_dark_matter = 250
			acot_sr_dark_energy = 250
			"
		UPKEEP = "
			energy = 10
			volatile_motes = 2
			exotic_gases = 2
			rare_crystals = 2
			sr_dark_matter = 5
			acot_sr_dark_energy = 5
			"
		PRODUCES = "
			unity = 50
			energy = 50
			"
		AI_FACTORS = "
			modifier = {
				factor = 0
				planet_owner = {
					has_monthly_income = {
						resource = sr_dark_matter
						value <= 3
					}
				}
			}
			"
	}
	custom_tooltip = building_acot_giga_fortress_tooltip
	country_modifier = {
		country_naval_cap_add = 100
		starbase_shipyard_build_speed_mult = 0.10
	}
	planet_modifier = {
		planet_amenities_add = 2000
		planet_housing_add = 2000
		planet_stability_add = 10
	}
	army_modifier = {
		army_defense_morale_mult = 5
		army_defense_health_mult = 2
		army_defense_damage_mult = 2
	}
}
building_acot_giga_fortress_lab = {
	inline_script = {
		script = buildings/military/giga_fortress
		TIER = 2
		PREREQUISITE = tech_acot_giga_fortress
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_giga_fortress_lab
		JOBS_REGULAR = "
			job_acot_giga_fortress_operator_add = 200
			job_acot_overseer_add = 300
			"
		JOBS_HIVE = "
			job_acot_giga_fortress_operator_drone_add = 200
			job_acot_overseer_drone_add = 200
			"
		JOBS_MACHINE = "
			job_acot_giga_fortress_operator_drone_add = 200
			job_acot_overseer_droid_add = 200
			"
		JOBS_FE = "
			job_acot_giga_fortress_operator_ancient_add = 100
			"
		COST = "
			minerals = 15000
			sr_dark_matter = 250
			acot_sr_dark_energy = 250
			"
		UPKEEP = "
			energy = 10
			volatile_motes = 2
			exotic_gases = 2
			rare_crystals = 2
			sr_dark_matter = 5
			acot_sr_dark_energy = 5
			"
		PRODUCES = "
			unity = 100
			influence = 0.5
			"
		AI_FACTORS = "
			modifier = {
				factor = 0
				planet_owner = {
					has_monthly_income = {
						resource = sr_dark_matter
						value <= 3
					}
				}
			}
			"
	}
	custom_tooltip = building_acot_giga_fortress_tooltip
	country_modifier = {
		country_naval_cap_add = 200
		starbase_shipyard_build_speed_mult = 0.10
	}
	planet_modifier = {
		planet_amenities_add = 4000
		planet_housing_add = 4000
		planet_stability_add = 10
	}
	army_modifier = {
		army_defense_morale_mult = 5
		army_defense_health_mult = 2
		army_defense_damage_mult = 2
	}
}
building_acot_giga_fortress_obelisk = {
	inline_script = {
		script = buildings/military/giga_fortress
		TIER = 2
		PREREQUISITE = tech_acot_giga_fortress
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_giga_fortress_obelisk
		JOBS_REGULAR = "
			job_acot_giga_fortress_operator_add = 200
			job_acot_enforcer_add = 500
			"
		JOBS_HIVE = "
			job_acot_giga_fortress_operator_drone_add = 300
			job_acot_enforcer_drone_add = 500
			"
		JOBS_MACHINE = "
			job_acot_giga_fortress_operator_drone_add = 300
			job_acot_enforcer_drone_add = 500
			"
		JOBS_FE = "
			job_acot_giga_fortress_operator_ancient_add = 200
			job_fe_protector_add = 300
			"
		COST = "
			minerals = 15000
			sr_dark_matter = 250
			acot_sr_dark_energy = 250
			"
		UPKEEP = "
			energy = 10
			volatile_motes = 2
			exotic_gases = 2
			rare_crystals = 2
			sr_dark_matter = 5
			acot_sr_dark_energy = 5
			"
		PRODUCES = "
			unity = 100
			energy = 100
			minerals = 100
			alloys = 100
			"
		AI_FACTORS = "
			modifier = {
				factor = 0
				planet_owner = {
					has_monthly_income = {
						resource = sr_dark_matter
						value <= 3
					}
				}
			}
			"
	}
	custom_tooltip = building_acot_giga_fortress_obelisk_tooltip
	planet_modifier = {
		planet_amenities_add = 4000
		planet_housing_add = 4000
		planet_stability_add = 5
	}
	army_modifier = {
		army_defense_morale_mult = 10
		army_defense_health_mult = 5
		army_defense_damage_mult = 5
		army_starting_experience_add = 2500
	}
}

#####################
# Training Building
#####################
building_acot_ae_hospital = {
	inline_script = {
		script = buildings/civilian/hospital
		TIER = 2
		PREREQUISITE = tech_fe_nourishment_center
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_hospital
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = @acot_building_advanced_alloy_cost
			sr_dark_matter = @acot_building_advanced_dm_cost
			acot_sr_dark_energy = @acot_building_advanced_de_cost
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
	}
}
building_acot_ae_hive_pool = {
	inline_script = {
		script = buildings/civilian/hive_pool
		TIER = 2
		PREREQUISITE = tech_acot_ae_hive_depot
		ALLOW = "has_ascended_capital = yes"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_hive_pool
		AI_FACTORS = "
			modifier = {
				factor = 5
				free_amenities < 2
			}
			modifier = {
				factor = 0
				has_building = building_acot_ae_hive_pool
			}
			"
	}
	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				planet_owner = {
					is_wilderness_empire = no
				}
			}
			alloys = 500
		}
		cost = {
			trigger = {
				planet_owner = {
					is_wilderness_empire = yes
				}
			}
			alloys = 200
			food = 100
			biomass = 200
		}
		cost = {
			acot_sr_dark_energy = 300
			sr_dark_matter = 300
		}
		upkeep = {
			trigger = {
				planet_owner = {
					is_wilderness_empire = no
					NOT = { has_technology = tech_acot_fractured_autoharvesting }
				}
			}
			energy = 2
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
		upkeep = {
			trigger = {
				planet_owner = {
					is_wilderness_empire = yes
					NOT = { has_technology = tech_acot_fractured_autoharvesting }
				}
			}
			food = 2
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
	}
}
building_acot_ae_super_assembly = {
	inline_script = {
		script = buildings/civilian/super_assembly
		TIER = 2
		PREREQUISITE = tech_acot_ae_super_assembly
		ALLOW = "
			has_ascended_capital = yes
			hidden_trigger = {
				OR = {
					owner = { is_ai = no }
					NAND = {
						free_district_slots = 0
						free_building_slots <= 1
						free_housing <= 0
						free_jobs <= 0
					}
				}
			}
			"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_super_assembly
		JOB = "acot_roboman"
		JOB_MACHINE = "acot_robodrone"
		AI_FACTORS = "
			modifier = {
				factor = 0
				num_buildings = {
					type = building_acot_ae_super_assembly
					value >= 1
				}
			}
			"
	}
	potential = {
		exists = planet_owner
		OR = {
			planet_owner = {
				is_ai = no
			}
			NOT = {
				exists = assembling_species
			}
			assembling_species = {
				is_robotic_species = yes
			}
		}
		planet_owner = {
			is_regular_empire = yes
			is_individual_machine = no
			NOT = {
				has_policy_flag = robots_outlawed
			}
			OR = {
				is_ai = no
				NOT = { has_ascension_perk = ap_engineered_evolution }
				is_materialist = yes
			}
		}
		NOT = { has_modifier = resort_colony }
	}
	convert_to = {
		building_acot_ae_super_assembly_machine
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = 400
			sr_dark_matter = 300
			acot_sr_dark_energy = 450
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
	}
}
building_acot_ae_super_assembly_machine = {
	icon = building_acot_ae_super_assembly
	inline_script = {
		script = buildings/civilian/super_assembly
		TIER = 2
		PREREQUISITE = tech_acot_ae_super_assembly
		ALLOW = "
			has_ascended_capital = yes
			hidden_trigger = {
				OR = {
					owner = { is_ai = no }
					NAND = {
						free_district_slots = 0
						free_building_slots <= 1
						free_housing <= 0
						free_jobs <= 0
					}
				}
			}
			"
		CAN_BUILD = no
		UPGRADES_INTO = building_phanon_super_assembly_machine
		JOB = "acot_roboman"
		JOB_MACHINE = "acot_robodrone"
		AI_FACTORS = "
			modifier = {
				factor = 0
				num_buildings = {
					type = building_acot_ae_super_assembly_machine
					value >= 1
				}
			}
			"
	}
	potential = {
		exists = planet_owner
		planet_owner = {
			OR = {
				is_machine_empire = yes
				is_individual_machine = yes
			}
		}
		NOR = {
			has_modifier = gestation_colony
			has_modifier = resort_colony
		}
	}
	convert_to = {
		building_acot_ae_super_assembly
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = 400
			sr_dark_matter = 300
			acot_sr_dark_energy = 450
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
	}
}

### SOECIAL POP BUILDINGER
building_acot_ae_clone_vats = {
	inline_script = {
		script = buildings/clone_vats_and_evochambers
		TIER = 2
		POP_GROWTH = 6
		POP_ASSEMBLY_GENETIC_TRADITION = 800
		UPGRADES_INTO = building_phanon_clone_vats
		ALLOW = "has_ascended_capital = yes"
		PREREQUISITE = tech_acot_ae_clone_vats
		AI_FACTORS = "
			modifier = {
				factor = 0
				OR = {
					has_building = building_acot_ae_clone_vats
				}
			}
			"
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = @acot_building_advanced_alloy_cost
			sr_dark_matter = @acot_building_advanced_dm_cost
			acot_sr_dark_energy = @acot_building_advanced_de_cost
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
		upkeep = {
			trigger = {
				exists = planet_owner
				planet_owner = {
					is_lithoid_empire = no
				}
			}
			food = 20
		}
		upkeep = {
			trigger = {
				exists = planet_owner
				planet_owner = {
					is_lithoid_empire = yes
				}
			}
			minerals = 20
		}
	}
}

# Synth path
building_acot_ae_synt_center = {
	inline_script = {
		script = buildings/civilian/synt_center
		TIER = 2
		UPGRADES_INTO = building_phanon_synt_center
		ALLOW = "has_ascended_capital = yes"
		PREREQUISITE = tech_acot_ae_synt_center
		CAN_BUILD = no
		AI_FACTORS = "
			modifier = {
				factor = 0
				OR = {
					has_building = building_acot_ae_synt_center
				}
			}
			"
	}
	resources = {
		category = planet_buildings
		produces = {
			engineering_research = 15
		}
		cost = {
			minerals = 50
			sr_dark_matter = 350
			acot_sr_dark_energy = 350
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 10
			acot_sr_dark_energy = 10
		}
	}
}

# PSIONOIDE path
building_acot_ae_psi_altar = {
	inline_script = {
		script = buildings/civilian/psi_altar
		TIER = 2
		UPGRADES_INTO = building_phanon_psi_altar
		ALLOW = "has_ascended_capital = yes"
		PREREQUISITE = tech_acot_ae_psi_altar
		CAN_BUILD = no
		COST = "
			minerals = 50
			sr_dark_matter = 400
			acot_sr_dark_energy = 400
			"
		PRODUCES = "
			sr_zro = 10
			unity = 50
			"
		UPKEEP = "
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 10
			acot_sr_dark_energy = 10
			"
		AI_FACTORS = "
			modifier = {
				factor = 0
				OR = {
					has_building = building_acot_ae_psi_altar
				}
			}
			"
	}
}

# Machine path
building_acot_ae_machine_dome = {
	inline_script = {
		script = buildings/civilian/machine_dome
		TIER = 2
		UPGRADES_INTO = building_phanon_machine_dome
		ALLOW = "has_ascended_capital = yes"
		PREREQUISITE = tech_acot_ae_machine_dome
		CAN_BUILD = no
		AI_FACTORS = "
			modifier = {
				factor = 0
				OR = {
					has_building = building_acot_ae_machine_dome
				}
			}
			"
	}
	resources = {
		category = planet_buildings
		produces = {
			engineering_research = 15
		}
		cost = {
			minerals = 150
			sr_dark_matter = 250
			acot_sr_dark_energy = 250
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 10
			acot_sr_dark_energy = 10
		}
	}
}

#### HIVE PATHOS
building_acot_ae_hive_evochamber = {
	inline_script = {
		script = buildings/clone_vats_and_evochambers
		TIER = 2
		POP_GROWTH = 2
		POP_ASSEMBLY_GENETIC_TRADITION = 800
		PREREQUISITE = tech_acot_ae_hive_evochamber
		UPGRADES_INTO = building_phanon_hive_evochamber
		ALLOW = "has_ascended_capital = yes"
		AI_FACTORS = "
			modifier = {
				factor = 0
				OR = {
					has_building = building_acot_ae_hive_evochamber
				}
			}
			"
	}
	planet_modifier = {
		logistic_growth_mult = 0.20
		bonus_pop_growth_mult = 1.0
	}
	resources = {
		category = planet_buildings
		produces = {
			society_research = 50
			food = 100
		}
		cost = {
			minerals = 150
			sr_dark_matter = 250
			acot_sr_dark_energy = 250
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 10
			acot_sr_dark_energy = 10
		}
	}
}

#########################  VANILLA RESOURCES  ######################################
building_acot_ae_alloy_forge = {
	inline_script = {
		script = buildings/production/alloy_forge
		TIER = 2
		PREREQUISITE = tech_acot_ae_alloy_foundry
		UPGRADES_INTO = building_phanon_alloy_forge
		ALLOW = "has_ascended_capital = yes"
		JOB = acot_alloyman
		JOB_MACHINE = acot_alloydrone
		JOB_HIVE = acot_alloydrone
		AI_FACTORS = "
			modifier = {
				factor = 50
				planet_owner = {
					has_monthly_income = {
						resource = alloys
						value < 5
					}
				}
			}
			modifier = {
				factor = 0
				planet_owner = {
					has_monthly_income = {
						resource = sr_dark_matter
						value <= 2
					}
				}
			}
			"
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = @acot_building_advanced_alloy_cost
			sr_dark_matter = @acot_building_advanced_dm_cost
			acot_sr_dark_energy = @acot_building_advanced_de_cost
		}
		produces = {
			alloys = 50
		}
		produces = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			alloys = 20
		}
		upkeep = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			sr_dark_matter = 1
			acot_sr_dark_energy = 1
			minerals = 10
		}
	}
}
building_acot_ae_transmutor = {
	inline_script = {
		script = buildings/production/transmutor
		TIER = 2
		PREREQUISITE = tech_acot_ae_transmutor
		UPGRADES_INTO = building_phanon_transmutor
		ALLOW = "has_ascended_capital = yes"
		JOB = acot_transmute_man
		JOB_HIVE = acot_transmute_drone
		COST = "
			alloys = @acot_building_advanced_alloy_cost
			sr_dark_matter = @acot_building_advanced_dm_cost
			acot_sr_dark_energy = @acot_building_advanced_de_cost
			"
		AI_FACTORS = "
			modifier = {
				factor = 5000
				planet_owner = {
					OR = {
						has_monthly_income = {
							resource = rare_crystals
							value < 4
						}
						has_monthly_income = {
							resource = exotic_gases
							value < 4
						}
						has_monthly_income = {
							resource = volatile_motes
							value < 4
						}
					}
				}
			}
			modifier = {
				factor = 0
				num_buildings = {
					type = building_acot_ae_transmutor
					value >= 1
				}
			}
			"
	}
}
building_acot_ae_mineral_processing_plant = {
	inline_script = {
		script = buildings/production/mineral_processing_plant
		TIER = 2
		PREREQUISITE = tech_acot_ae_mineral_processing_plant
		UPGRADES_INTO = building_phanon_mineral_processing_plant
		ALLOW = "has_ascended_capital = yes"
		JOB = acot_mineralman
		JOB_HIVE = acot_mineraldrone
		COST = "
			alloys = @acot_building_pleb_advanced_alloy_cost
			sr_dark_matter = @acot_building_pleb_advanced_dm_cost
			acot_sr_dark_energy = @acot_building_pleb_advanced_de_cost
			"
		PRODUCES = "
			minerals = 100
			"
		AI_FACTORS = "
			modifier = {
				factor = 5
				planet_owner = {
					has_monthly_income = {
						resource = minerals
						value < 5
					}
				}
			}
			modifier = {
				factor = 0
				planet_owner = {
					has_monthly_income = {
						resource = energy
						value < 5
					}
				}
			}
			"
	}
}

########## ENERGY NEXOUS
building_acot_ae_power_hub = {
	inline_script = {
		script = buildings/production/power_hub
		TIER = 2
		PREREQUISITE = tech_acot_ae_power_hub
		UPGRADES_INTO = building_phanon_power_hub
		ALLOW = "has_ascended_capital = yes"
		JOB = acot_energyman
		JOB_HIVE = acot_energydrone
		COST = "
			alloys = @acot_building_pleb_advanced_alloy_cost
			sr_dark_matter = @acot_building_pleb_advanced_dm_cost
			acot_sr_dark_energy = @acot_building_pleb_advanced_de_cost
			"
		PRODUCES = "
			energy = 100
			"
		AI_FACTORS = "
			modifier = {
				factor = 5
				planet_owner = {
					has_monthly_income = {
						resource = energy
						value < 10
					}
				}
			}
			"
	}
}

### FOOOD FIDDLEEE ###
building_acot_ae_food_processing_complex = {
	inline_script = {
		script = buildings/production/food_processing_complex
		TIER = 2
		PREREQUISITE = tech_acot_ae_power_hub
		UPGRADES_INTO = building_phanon_power_hub
		ALLOW = "has_ascended_capital = yes"
		JOB = acot_foodman
		JOB_HIVE = acot_fooddrone
		COST = "
			alloys = @acot_building_pleb_advanced_alloy_cost
			sr_dark_matter = @acot_building_pleb_advanced_dm_cost
			acot_sr_dark_energy = @acot_building_pleb_advanced_de_cost
			"
		PRODUCES = "
			food = 100
			"
		AI_FACTORS = "
			modifier = {
				factor = 5
				planet_owner = {
					has_monthly_income = {
						resource = food
						value < 5
					}
				}
			}
			modifier = {
				factor = 0
				planet_owner = {
					OR = {
						is_mechanical_empire = no
						AND = {
							is_mechanical_empire = yes
							OR = {
								has_civic = civic_machine_servitor
								has_civic = civic_machine_assimilator
							}
						}
					}
					has_monthly_income = {
						resource = energy
						value < 5
					}
				}
			}
			modifier = {
				factor = 0
				planet_owner = {
					is_mechanical_empire = yes
					NOR = {
						has_civic = civic_machine_servitor
						has_civic = civic_machine_assimilator
					}
				}
			}
			"
	}
}
building_acot_ae_factory = {
	base_buildtime = @acot_building_advanced_build_time
	can_build = no
	category = manufacturing
	building_sets = {
		industrial
		factory
	}
	allow = {
		has_ascended_capital = yes
	}
	upgrades = {
		building_phanon_civilian_factory
	}
	potential = {
		exists = planet_owner
		planet_owner = {
			OR = {
				is_gestalt = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = {
				is_individualistic_empire = yes
			}
		}
		modifier = {
			job_acot_artisan_add = 400
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			job_acot_artisan_add = 400
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = @acot_building_advanced_alloy_cost
			sr_dark_matter = @acot_building_advanced_dm_cost
			acot_sr_dark_energy = @acot_building_advanced_de_cost
		}
		produces = {
			consumer_goods = 50
		}
		produces = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			consumer_goods = 40
		}
		upkeep = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			sr_dark_matter = 2
			acot_sr_dark_energy = 2
			minerals = 20
		}
	}
	prerequisites = {
		tech_acot_ae_factory
	}
	triggered_desc = {
		trigger = {
			exists = planet_owner
			planet_owner = {
				is_individualistic_empire = yes
			}
		}
		text = job_artisan_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = planet_owner
			planet_owner = {
				is_gestalt = yes
			}
		}
		text = job_artisan_drone_effect_desc
	}
	ai_weight = {
		weight = 2
		modifier = {
			factor = 5
			planet_owner = {
				has_monthly_income = {
					resource = consumer_goods
					value < 5
				}
				has_monthly_income = {
					resource = minerals
					value > 6
				}
			}
		}
		# There are already unworked jobs
		# Blocks buildings unworkable by remaining pops (slaves/robots etc)
		# Will be improved... at some point
		modifier = {
			factor = 0
			free_jobs > 0
		}
	}
	ai_resource_production = {
		consumer_goods = 1
		trigger = {
			always = yes
		}
	}
}

#####################
# Research Building
#####################
building_acot_ae_enigmatic_lab = {
	base_buildtime = 680
	can_build = no
	can_demolish = yes
	category = research
	building_sets = {
		research
	}
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = penal_colony
		}
		is_special_colony_type = no
	}
	allow = {
		has_ascended_capital = yes
	}
	upgrades = {
		building_phanon_enigmatic_lab
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = penal_colony
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = { is_regular_empire = yes }
		}
		modifier = {
			job_acot_researcher_add = 400
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			job_acot_researcher_drone_add = 400
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = 600
			sr_dark_matter = 400
			acot_sr_dark_energy = 400
		}
		produces = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			physics_research = 24
			engineering_research = 24
			society_research = 24
		}
		upkeep = {
			trigger = {
				has_modifier = acot_modifier_ascended_city
			}
			sr_dark_matter = 6
			acot_sr_dark_energy = 6
		}
	}
	prerequisites = {
		tech_acot_ae_enigmatic_lab
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 0
			planet_owner = {
				has_monthly_income = {
					resource = sr_dark_matter
					value <= 3
				}
			}
		}
		modifier = {
			factor = 0
			planet_owner = {
				has_monthly_income = {
					resource = energy
					value <= 10
				}
			}
		}
		modifier = {
			factor = 0
			planet_owner = {
				has_monthly_income = {
					resource = consumer_goods
					value <= 10
				}
			}
		}
	}
}
building_acot_ae_institute = {
	base_buildtime = 520
	can_build = no
	category = research
	building_sets = {
		research
	}
	allow = {
		has_ascended_capital = yes
	}
	potential = {
		exists = planet_owner
		planet_owner = {
			has_technology = tech_acot_ae_institute
		}
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = penal_colony
		}
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = penal_colony
		}
	}
	upgrades = {
		building_phanon_institute
	}
	resources = {
		category = planet_buildings
		produces = {
			physics_research = 200
			engineering_research = 200
			society_research = 200
			minor_artifacts = 10
		}
		cost = {
			alloys = 400
			sr_dark_matter = 300
			acot_sr_dark_energy = 450
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			sr_dark_matter = 50
			acot_sr_dark_energy = 50
		}
	}
	country_modifier = {
		country_scientist_cap_add = 2
		physics_tech_cost_mult = -0.2
		society_tech_cost_mult = -0.2
		engineering_tech_cost_mult = -0.2
		all_technology_research_speed = 0.4
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = {
				is_regular_empire = yes
			}
		}
		modifier = {
			job_acot_researcher_add = 400
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			job_acot_researcher_drone_add = 400
		}
	}
	prerequisites = {
		tech_acot_ae_institute
	}
	show_tech_unlock_if = {
	}
	ai_weight = {
		weight = 1000
		# There are already unworked jobs
		# Blocks buildings unworkable by remaining pops (slaves/robots etc)
		# Will be improved... at some point
		modifier = {
			factor = 0
			free_jobs > 0
		}
	}
}

#####################
# DM and Dark Energy Resources
#####################
building_acot_ae_dark_matter_synthersizer = {
	base_buildtime = @acot_building_basic_build_time
	can_build = no
	category = manufacturing
	building_sets = {
		industrial
		factory
		foundry
	}
	potential = {
	}
	country_modifier = {
		country_resource_max_acot_sr_dark_energy_add = 20000
		country_resource_max_sr_dark_matter_add = 20000
	}
	allow = {
		has_ascended_capital = yes
	}
	upgrades = {
		building_phanon_synthersizer
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = 1250
			sr_dark_matter = 625
			acot_sr_dark_energy = 625
		}
		produces = {
			sr_dark_matter = 20
			acot_sr_dark_energy = 20
		}
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_dm_dark_energy_pylon
					value = 2
				}
			}
			acot_sr_dark_energy = 20
		}
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_dm_dark_energy_pylon
					value = 3
				}
			}
			acot_sr_dark_energy = 30
		}
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_dm_dark_energy_pylon
					value >= 4
				}
			}
			acot_sr_dark_energy = 40
		}
		##### A DE
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_ae_dark_energy_pylon
					value = 2
				}
			}
			acot_sr_dark_energy = 30
		}
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_ae_dark_energy_pylon
					value = 3
				}
			}
			acot_sr_dark_energy = 40
		}
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_ae_dark_energy_pylon
					value >= 4
				}
			}
			acot_sr_dark_energy = 50
		}
		##### DM
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_dm_dark_matter_generator
					value = 2
				}
			}
			sr_dark_matter = 20
		}
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_dm_dark_matter_generator
					value = 3
				}
			}
			sr_dark_matter = 30
		}
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_dm_dark_matter_generator
					value >= 4
				}
			}
			sr_dark_matter = 40
		}
		##### A DM
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_ae_dark_matter_generator
					value = 2
				}
			}
			sr_dark_matter = 30
		}
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_ae_dark_matter_generator
					value = 3
				}
			}
			sr_dark_matter = 40
		}
		produces = {
			trigger = {
				num_buildings = {
					type = building_acot_ae_dark_matter_generator
					value >= 4
				}
			}
			sr_dark_matter = 50
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			energy = 10
		}
	}
	prerequisites = {
		tech_acot_ae_dark_matter_synthersizer
	}
	ai_weight = {
		weight = 25000
	}
	ai_resource_production = {
		sr_dark_matter = 100
		acot_sr_dark_energy = 100
		trigger = {
			always = yes
		}
	}
}
building_acot_ae_dark_energy_pylon = {
	base_buildtime = @acot_building_basic_build_time
	can_demolish = yes
	can_build = no
	category = manufacturing
	building_sets = {
		industrial
		factory
		foundry
	}
	potential = {
	}
	allow = {
		has_ascended_capital = yes
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = {
				is_gestalt = no
			}
		}
		modifier = {
			job_acot_dark_energy_man_add = 400
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			job_acot_dark_energy_drone_add = 400
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = 400
		}
		produces = {
			trigger = {
				planet_owner = {
					is_ai = yes
				}
			}
			acot_sr_dark_energy = 8
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			energy = 8
		}
	}
	prerequisites = {
		tech_acot_ae_dark_energy_pylon
	}
	ai_weight = {
		weight = 15
		modifier = {
			factor = 10000
			planet_owner = {
				has_monthly_income = {
					resource = acot_sr_dark_energy
					value < 3
				}
			}
		}
		modifier = {
			factor = 0
			planet_owner = {
				has_monthly_income = {
					resource = energy
					value <= 10
				}
			}
		}
	}
}
building_acot_ae_dark_matter_generator = {
	base_buildtime = @acot_building_basic_build_time
	can_demolish = yes
	can_build = no
	category = manufacturing
	building_sets = {
		industrial
		factory
		foundry
	}
	potential = {
	}
	allow = {
		has_ascended_capital = yes
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = {
				is_gestalt = no
			}
		}
		modifier = {
			job_acot_dark_matter_man_add = 400
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = planet_owner
			planet_owner = {
				is_gestalt = yes
			}
		}
		modifier = {
			job_acot_dark_matter_drone_add = 400
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			alloys = 400
		}
		produces = {
			trigger = {
				planet_owner = {
					is_ai = yes
				}
			}
			sr_dark_matter = 8
		}
		upkeep = {
			trigger = {
				planet_owner = {
					NOT = {
						has_technology = tech_acot_fractured_autoharvesting
					}
				}
			}
			energy = 8
		}
	}
	prerequisites = {
		tech_acot_ae_dark_matter_generator
	}
	ai_weight = {
		weight = 15
		modifier = {
			factor = 100000
			planet_owner = {
				has_monthly_income = {
					resource = sr_dark_matter
					value < 10
				}
			}
		}
		modifier = {
			factor = 0
			planet_owner = {
				has_monthly_income = {
					resource = minerals
					value <= 10
				}
			}
		}
	}
}

# ------------------------------------------------------------------------------------------------ #
#                                   New custom building additions                                  #
# ------------------------------------------------------------------------------------------------ #
building_ae_commercial_megaplex = {
	base_buildtime = 900
	can_build = no
	category = trade
	allow = {
		has_ascended_capital = yes
	}
	potential = {
		exists = planet_owner
		planet_owner = {
			is_individualistic_empire = yes
			has_technology = tech_ae_commercial_megaplex
		}
		NOT = {
			has_modifier = slave_colony
		}
	}
	upgrades = {
		building_phanon_commercial_megaplex
	}
	destroy_trigger = {
		exists = planet_owner
		OR = {
			planet_owner = {
				is_regular_empire = no
			}
			has_modifier = slave_colony
		}
	}
	planet_modifier = {
		job_merchant_add = 200
		job_ae_clerk_add = 2000
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 1500
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}
		upkeep = {
			energy = 20
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
	}
	prerequisites = {
		tech_ae_commercial_megaplex
	}
	triggered_desc = {
		text = job_ae_clerk_effect_desc
	}
	triggered_desc = {
		text = job_merchant_effect_desc
	}
	ai_weight = {
		weight = 0
		modifier = {
			weight = 1
			planet_owner = {
				resource_income_compare = {
					resource = sr_dark_matter
					value >= 3
				}
				resource_income_compare = {
					resource = acot_sr_dark_energy
					value >= 3
				}
				resource_income_compare = {
					resource = energy
					value >= 15
				}
			}
		}
		modifier = {
			factor = 10
			exists = planet_owner
			planet_owner = {
				is_megacorp = yes
			}
		}
	}
	ai_resource_production = {
		energy = 1
		trigger = {
			always = yes
		}
	}
}
building_ae_bureaucratic = {
	base_buildtime = 900
	can_build = no
	category = unity
	potential = {
		exists = planet_owner
		planet_owner = {
			is_individualistic_empire = yes
			has_technology = tech_ae_bureau
		}
	}
	allow = {
		has_ascended_capital = yes
	}
	upgrades = {
		building_phanon_bureaucratic
	}
	destroy_trigger = {
		exists = planet_owner
		OR = {
			planet_owner = {
				is_regular_empire = no
			}
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 1500
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}
		upkeep = {
			energy = 20
			sr_dark_matter = 4
			acot_sr_dark_energy = 4
		}
	}
	planet_modifier = {
		job_ae_bureaucrat_add = 800
	}
	country_modifier = {
		empire_size_mult = -0.02
	}
	prerequisites = {
		tech_ae_bureau
	}
	triggered_desc = {
		text = job_ae_bureaucrat_effect_desc
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 0
			buildings_has_crystals = no
		}
		modifier = {
			factor = 2
			planet_owner = {
				empire_sprawl_over_cap > 0
			}
		}
		modifier = {
			factor = 2
			planet_owner = {
				empire_sprawl_over_cap > 10
			}
		}
		modifier = {
			factor = 2
			planet_owner = {
				empire_sprawl_over_cap > 20
			}
		}
		modifier = {
			factor = 2
			planet_owner = {
				empire_sprawl_over_cap > 40
			}
		}
		modifier = {
			factor = 2
			planet_owner = {
				has_valid_civic = civic_byzantine_bureaucracy
			}
		}
	}
	on_queued = {
		planet = {
			set_timed_planet_flag = {
				flag = recent_admin_building_built
				years = 2
			}
		}
	}
}
building_ae_embassy = {
	base_buildtime = 1000
	can_build = no
	category = government
	potential = {
		exists = planet_owner
		planet_owner = {
			is_individualistic_empire = yes
			has_technology = tech_ae_embassy
		}
		planet = {
			is_capital = yes
		}
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}
	allow = {
		has_ascended_capital = yes
	}
	upgrades = {
		building_phanon_embassy
	}
	destroy_trigger = {
		OR = {
			AND = {
				exists = planet_owner
				planet_owner = {
					is_regular_empire = no
				}
			}
			planet = {
				is_capital = no
			}
		}
	}
	country_modifier = {
		envoys_add = 4
		diplo_weight_mult = 0.1
	}
	resources = {
		category = planet_buildings
		cost = {
			influence = 100
			energy = 1500
			minerals = 1500
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}
		upkeep = {
			energy = 50
			sr_dark_matter = 10
			acot_sr_dark_energy = 10
		}
	}
	prerequisites = {
		tech_ae_embassy
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 0
			buildings_has_crystals = no
		}
		modifier = {
			factor = 5
			exists = planet_owner
			planet_owner = {
				is_galactic_community_member = yes
			}
		}
		modifier = {
			factor = 5
			exists = planet_owner
			planet_owner = {
				has_federation = yes
			}
		}
		modifier = {
			factor = 3
			exists = planet_owner
			planet_owner = {
				is_part_of_galactic_council = yes
			}
		}
	}
}
