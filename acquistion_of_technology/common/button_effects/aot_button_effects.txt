#Failure
aot_production_core_failure_chance_0 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 0
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_5 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 1
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_10 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 2
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_15 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 3
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_20 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 4
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_25 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 5
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_failure_chance_0_tooltip"
	}
}

aot_manage_button_no_effect = {
	potential = {
		exists = from
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
}

aot_production_core_reactor_intensity_0 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 0
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_intensity_0"
	}
}

aot_production_core_reactor_intensity_1 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 1
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_intensity_0"
	}
}

aot_production_core_reactor_intensity_2 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 2
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_intensity_0"
	}
}

aot_production_core_reactor_intensity_3 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 3
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_intensity_0"
	}
}

aot_production_core_reactor_intensity_4 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 4
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_intensity_0"
	}
}

aot_production_core_reactor_intensity_5 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 5
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_intensity_0"
	}
}

aot_production_core_reactor_yield_50 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 0
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_yield_0"
	}
}

aot_production_core_reactor_yield_100 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 1
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_yield_0"
	}
}

aot_production_core_reactor_yield_200 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 2
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_yield_0"
	}
}

aot_production_core_reactor_yield_300 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 3
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_yield_0"
	}
}

aot_production_core_reactor_yield_400 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 4
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_yield_0"
	}
}

aot_production_core_reactor_yield_500 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 5
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_yield_0"
	}
}

aot_production_core_reactor_project_cost_0 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 0
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_production_core_reactor_project_cost_0"
	}
}

aot_production_core_reactor_project_cost_2500 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 1
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_production_core_reactor_project_cost_0"
	}
}

aot_production_core_reactor_project_cost_5000 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 2
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_production_core_reactor_project_cost_0"
	}
}

aot_production_core_reactor_project_cost_7500 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 3
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_production_core_reactor_project_cost_0"
	}
}

aot_production_core_reactor_project_cost_10000 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 4
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_production_core_reactor_project_cost_0"
	}
}

aot_production_core_reactor_project_cost_12500 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 5
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "aot_production_core_reactor_project_cost_0"
	}
}

#buttons
aot_production_core_reactor_intensity_up = {
	potential = {
		exists = from
	}
	allow = {
		has_enough_dark_matter_to_increase_reactor_intensity = yes
		custom_tooltip = {
			fail_text = is_at_max_dm_amount
			hidden_trigger = {
				NOT = {
					has_country_flag = has_ongoing_production_core_study
				}
				check_variable = {
					which = current_dm_production_core_energy_level
					value < 5
				}
			}
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_intensity_up"
		hidden_effect = {
			change_variable = {
				which = current_dm_production_core_energy_level
				value = 1
			}
			change_variable = {
				which = aot_production_core_failure_chance
				value = 5
			}
			change_variable = {
				which = aot_production_core_project_cost
				value = @dm_cost_1
			}
		}
	}
}

aot_production_core_reactor_intensity_down = {
	potential = {
		exists = from
	}
	allow = {
		custom_tooltip = {
			fail_text = is_at_min_dm_amount
			hidden_trigger = {
				NOT = {
					has_country_flag = has_ongoing_production_core_study
				}
				check_variable = {
					which = current_dm_production_core_energy_level
					value > 0
				}
			}
		}
	}
	effect = {
		custom_tooltip = "aot_dm_production_core_intensity_down"
		hidden_effect = {
			subtract_variable = {
				which = current_dm_production_core_energy_level
				value = 1
			}
			subtract_variable = {
				which = aot_production_core_failure_chance
				value = 5
			}
			subtract_variable = {
				which = aot_production_core_project_cost
				value = @dm_cost_1
			}
		}
	}
}

aot_dm_production_core_proceed = {
	potential = {
		exists = from
	}
	allow = {
		has_enough_dark_matter_for_project = yes
	}
	effect = {
		set_country_flag = has_ongoing_production_core_study
		custom_tooltip = "aot_dm_production_core_proceed"
		hidden_effect = {
			if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 0
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_100_SUCCESS"
					location = event_target:pc_home
					owner = root
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 1
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_95_SUCCESS"
					location = event_target:pc_home
					owner = root
				}
				add_resource = {
					sr_dark_matter = @dm_cost_pay_1
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 2
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_90_SUCCESS"
					location = event_target:pc_home
					owner = root
				}
				add_resource = {
					sr_dark_matter = @dm_cost_pay_2
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 3
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_85_SUCCESS"
					location = event_target:pc_home
					owner = root
				}
				add_resource = {
					sr_dark_matter = @dm_cost_pay_3
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 4
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_80_SUCCESS"
					location = event_target:pc_home
					owner = root
				}
				add_resource = {
					sr_dark_matter = @dm_cost_pay_4
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 5
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_75_SUCCESS"
					location = event_target:pc_home
					owner = root
				}
				add_resource = {
					sr_dark_matter = @dm_cost_pay_5
				}
			}
		}
	}
}
