create_enigmatic_fortress_platform = {
	create_ship = {
		name = random
		design = "NAME_Xenophile_Enigmatic_Fortress_Platform"
	}
}
create_citadel_with_enigmatic_fortress_platform = {
	create_starbase = {
		size = "acot_fallen_starbase"
		module = "acot_starbase_shipyard"
		module = "acot_starbase_shipyard"
		module = "acot_starbase_shipyard"
		module = "acot_starbase_shipyard"
		module = "acot_starbase_anchorage"
		module = "acot_starbase_anchorage"
		building = "acot_starbase_detection_amplifier"
		building = "acot_super_reactor"
		building = "acot_starbase_reinforced_wall"
		building = "acot_starbase_super_computer"
		effect = {
			while = {
				count = 5
				create_fallen_empire_sentinel = yes
			}
			create_enigmatic_fortress_platform = yes
		}
	}
}
create_fallen_empire_starting_navy = {
	create_fallen_empire_fleet = yes
	create_fallen_empire_fleet = yes
	create_fallen_empire_fleet = yes
	random = {
		chance = 20
		create_fallen_empire_fleet = yes
	}
	if = {
		limit = {
			host_has_dlc = "Apocalypse"
		}
		create_fleet = {
			effect = {
				set_owner = prev.owner
				create_fallen_empire_colossus = yes
				set_location = {
					target = prev
					distance = 30
					angle = random
				}
			}
		}
	}
	if = {
		limit = {
			host_has_dlc = "Federations"
		}
		create_fleet = {
			effect = {
				set_owner = prev.owner
				create_fallen_empire_warbarge = yes
				set_location = {
					target = prev
					distance = 30
					angle = random
				}
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 60
				angle = random
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 80
				angle = random
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 100
				angle = random
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 40
				angle = random
			}
		}
	}
}
create_fallen_empire_reinforcements = {
	create_fleet = {
		settings = {
			can_change_composition = no
		}
		effect = {
			set_owner = prev.owner
			while = {
				count = 10
				create_fallen_empire_large_ship = yes
			}
			while = {
				count = 25
				create_fallen_empire_small_ship = yes
			}
			create_fallen_empire_titan = yes
			random_list = {
				25 = {
					set_location = {
						target = prev
						distance = 30
						angle = random
					}
				}
				25 = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
				25 = {
					set_location = {
						target = prev
						distance = 60
						angle = random
					}
				}
				25 = {
					set_location = {
						target = prev
						distance = 75
						angle = random
					}
				}
			}
			create_fallen_empire_warbarge = yes
			random_list = {
				25 = {
					set_location = {
						target = prev
						distance = 30
						angle = random
					}
				}
				25 = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
				25 = {
					set_location = {
						target = prev
						distance = 60
						angle = random
					}
				}
				25 = {
					set_location = {
						target = prev
						distance = 75
						angle = random
					}
				}
			}
		}
	}
}
create_fallen_empire_warbarge = {
	if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		create_ship = {
			name = random
			design = "NAME_Machine_Warbarge"
			graphical_culture = root
		}
	}
	if = {
		limit = {
			owner = {
				has_ethic = ethic_fanatic_materialist
			}
		}
		create_ship = {
			name = random
			design = "NAME_Materialist_Warbarge"
			graphical_culture = root
		}
	}
	###
	if = {
		limit = {
			owner = {
				has_ethic = ethic_fanatic_spiritualist
			}
		}
		create_ship = {
			name = random
			design = "NAME_Spiritualist_Warbarge"
			graphical_culture = root
		}
	}
	###
	if = {
		limit = {
			owner = {
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		create_ship = {
			name = random
			design = "NAME_Xenophobe_Warbarge"
			graphical_culture = root
		}
	}
	###
	if = {
		limit = {
			owner = {
				has_ethic = ethic_fanatic_xenophile
			}
		}
		create_ship = {
			name = random
			design = "NAME_Xenophile_Warbarge"
			graphical_culture = root
		}
	}
}

#--------------------------------------------------------------------------------------------------
#--------------------------------------<  Helper for buildings  >----------------------------------
#--------------------------------------------------------------------------------------------------
create_fallen_empire_capital_building = {
	# Add the appropriate capital building now.
	if = {
		limit = {
			owner = {
				is_individualistic_empire = yes
			}
		}
		add_building = building_ancient_palace
	}
	if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		add_building = building_ancient_control_center
	}
	if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		add_building = building_ancient_hive_capital
	}
}
create_fallen_empire_housing_in_zone = {
	# Add the appropriate housing building now.
	if = {
		limit = {
			owner = {
				is_individualistic_empire = yes
			}
		}
		add_building = {
			zone = $ZONE$
			building = building_acot_dm_mansion
		}
	}
	if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		add_building = {
			zone = $ZONE$
			building = building_acot_dm_ancient_cryo_chamber
		}
	}
	if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		add_building = {
			zone = $ZONE$
			building = building_acot_dm_hive_depot
		}
	}
}